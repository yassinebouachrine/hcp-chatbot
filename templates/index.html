<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot HCP Agadir</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Contenu principal de la page -->
    <div class="main-content">
        <div class="main-header">
            <img src="{{ url_for('static', filename='images/R.png') }}" alt="Logo HCP" class="main-logo">
            <div class="main-text">
                <h1>Haut Commissariat au Plan - Agadir</h1>
                <p>Direction Régionale de Souss-Massa</p>
            </div>
        </div>
        
        <div class="content-section">
            <h2>Bienvenue sur le portail statistique d'Agadir</h2>
            <p>Cette plateforme vous donne accès aux principales données démographiques, socio-économiques et statistiques de la région d'Agadir Ida-Outanane.</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Population</h3>
                    <p>Données démographiques actualisées</p>
                </div>
                <div class="stat-card">
                    <h3>Économie</h3>
                    <p>Indicateurs économiques régionaux</p>
                </div>
                <div class="stat-card">
                    <h3>Social</h3>
                    <p>Statistiques sociales et éducation</p>
                </div>
                <div class="stat-card">
                    <h3>Emploi</h3>
                    <p>Marché du travail et chômage</p>
                </div>
            </div>
            
            <p class="help-text">
                <i class="fas fa-info-circle"></i>
                Utilisez le chatbot en bas à droite pour poser vos questions sur les données statistiques d'Agadir.
            </p>
        </div>
    </div>

    <!-- Bouton d'ouverture du chatbot -->
    <button class="chatbot-toggle" id="chatbotToggle">
        <i class="fas fa-comments"></i>
        <div class="notification-badge" id="notificationBadge" style="display: none;">1</div>
    </button>

    <!-- Container du chatbot -->
    <div class="chatbot-container" id="chatbotContainer">
        <header class="chatbot-header">
            <div class="chatbot-title">
                <img src="{{ url_for('static', filename='images/R.png') }}" alt="HCP" class="chatbot-logo">
                <div class="title-text">
                    <h3>Assistant HCP</h3>
                    <span class="subtitle">Agadir</span>
                </div>
            </div>
            <div class="header-actions">
                <button class="clear-history-btn" id="clearHistoryBtn" title="Effacer l'historique">
                    <i class="fas fa-trash"></i>
                </button>
                <button class="chatbot-close" id="chatbotClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </header>
        
        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                <div class="message-avatar">
                    <img src="{{ url_for('static', filename='images/R.png') }}" alt="HCP" class="avatar-logo">
                </div>
                <div class="message-content">
                    <p>Bonjour ! Je suis l'assistant virtuel du HCP Agadir. Comment puis-je vous aider avec les données statistiques ?</p>
                    <div class="message-time">
                        <span id="currentTime"></span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="suggestions" id="suggestions">
            <div class="suggestion-title">Questions suggérées :</div>
            <div class="suggestion-buttons">
                <button class="suggestion-btn" onclick="sendSuggestion('Pour l\'ensemble de la population, quel est le nombre de population légale à Région de Souss-Massa ?')">
                    <i class="fas fa-users"></i>
                    Population légale à Région de Souss-Massa
                </button>
                <button class="suggestion-btn" onclick="sendSuggestion('Pour l\'ensemble de la population, quel est le taux taux de chômage à Région de Souss-Massa ?')">
                    <i class="fas fa-chart-line"></i>
                    Taux de chômage à Région de Souss-Massa
                </button>
                <button class="suggestion-btn" onclick="sendSuggestion('Pour l\'ensemble de la population, quel est le taux taux d\'analphabétisme des 10 ans et plus à Région de Souss-Massa ?')">
                    <i class="fas fa-book"></i>
                    Taux d'Analphabétisme des 10 ans et plus à Région de Souss-Massa
                </button>
            </div>
        </div>
        
        <div class="loading-indicator" id="loadingIndicator">
            <div class="loading-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <span>L'assistant réfléchit...</span>
        </div>
        
        <div class="input-container">
            <div class="input-group">
                <textarea id="messageInput" 
                       placeholder="Tapez votre question ici..." 
                       rows="1"
                       autocomplete="off"
                       maxlength="500"></textarea>
                <button id="sendButton">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Toast notification -->
    <div class="toast" id="toast">
        <span id="toastMessage"></span>
    </div>
    
    <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
    <script>
        // Initialiser l'heure actuelle
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('currentTime').textContent = new Date().toLocaleTimeString('fr-FR', {
                hour: '2-digit',
                minute: '2-digit'
            });
        });
    </script>
</body>
</html>